# Виджет погоды с использованием API Яндекса.

На просторах интернета мне попалась [статья](https://zhaik.su/667/yandeks-pogoda-na-ubuntu) с вот таким виджетом:
![screenshot](https://s8d7.turboimg.net/sp/1ce460999585657795bb3b7d3f46b3e0/4444516.png)
Здесь я хочу поделиться им с вами, рассказать как его установить на Ubuntu и предложить модифицировать его конфиг.

Если захочется попробовать, то смело клонируйте репозиторий и переходите к инструкции по установке ниже.

## Установка.

### Подготовка.

Сам виджет - это скрипт и конфиг вайл для [Conky](https://github.com/brndnmtthws/conky) - программы с очень широким функционалом для мониторинга ресурсов ПК, с её установки и начнём.
Для этого выполним в консоли команду:

Debian / Ubuntu
```BASH
sudo apt-get install conky
```

Так же рекомендуется иметь установленный [Inkscape](https://inkscape.org/)
```BASH
sudo apt install inkscape
```
```BASH
sudo apt install libcanberra-gtk-module libcanberra-gtk3-module
```

Так же для работы базового варианта виджета понадобится установить шрифт GE Inspira - папка с ним присутствует в репозитории.

### Взаимодействие с реппозиторием.

*Если есть желание модифицировать виджет самостоятельно, то не забудьте сделать форк проекта и клонировать уже собственный репозиторий.*

Клонируем (или скачиваем архивом) репозиторий в любое удобное место, нам из него понадобятся папки `weather`, `conky_config` и `GE_Inspira`.

Начнём со шрифтов.
* Устанавливаем все шрифты из папки `GE_Inspira`

Далее переходим к папке `conky_config`
* Копируем из неё вайл `.conkyrc` в свою домашнюю директорию, этот конфиг - основа виджета, которая отвечает за его внешний вид и функциональность (нажмите сочетание клавиш `Ctrl + H` если проводник не отобрает скрытые файлы).
* Открываем `.conkyrc` и находим в нём через поиск по файлу наименование сетевого оборудования `wlo1` и сверяемся с названием на своей машине, проверить которое можно командой:
    ```BASH
    ip a
    ```
    ![screenshot](https://s8d4.turboimg.net/sp/197339308b8eabd13b2a5c63908fa0b4/4110919.png)
  
  если название не совпадает, то заменяйте на указанное в терминале.
* Изначално предлагалось использовать файл `conky_start.sh` в качестве сценария для автозапуска Conky, но у меня не получилось добиться автозапуска, поэтому Conky я пока что запускаю вручную при каждом старте системы, мануал по настройке `conky_start.sh` был такой:
    * запустить "Настройка запуска приложений"
      ```BASH
      gnome-session-properties
      ```
      выбираем `add`, в появившемся окне жмём `Browse...` и указываем путь до скрипта `conky_start.sh` нажав на `Open` после выбора файла, название и описание не принципиально
      
      ![screenshot](https://s8d7.turboimg.net/sp/3bdcb8000adcb5303e5d5f1c431c8a84/3053193.png)

Папку `weather` удобнее всего будет скопировать в домашнюю директорию - в ней находится скрипт, который общается с API и записывает полученные данные во временные файлы `full.txt` и `fact.txt`.

---

Написано с использованием статьи ["Яндекс погода на Ubuntu"](https://zhaik.su/667/yandeks-pogoda-na-ubuntu)